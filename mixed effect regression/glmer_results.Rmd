---
title: "glmer_results"
output: html_document
---
```{r}
setwd("/home/megan/frequentist-bayesian-p-values-/mixed effect regression")
#set up 
library(brms)
library(rstanarm)
library(bayestestR)
library(BayesFactor)
library(cmdstanr)
library(emmeans)
library(parallel)
library(bridgesampling)
library(tidyverse)
library(extraDistr)
options(contrasts=c('contr.equalprior_deviations', 'contr.poly'))
options(brms.backend = "rstan")
library("extraDistr")
library(lme4)
```


```{r}
group2sd1n100 <- bind_rows(glmerresults_2groups, .id = "id")
group2sd1 <- bind_rows(group2sd1n20, group2sd1n30, group2sd1n50, group2sd1n100)
group2sd1$sd <- 1
rm(group2sd1n20, group2sd1n30, group2sd1n50, group2sd1n100)
group3sd0.5n20, group3sd0.5n30, group3sd0.5n50, group3sd0.5n100)
group2 <- bind_rows(group2sd0.5, group2sd1)
save(group3, file = "glmer_3groupresults.rda")
```


#tests 
```{r}
alpha <- 0.05 #set threshold for significance 
#pvalues
group2 <- group2 %>% 
  mutate(psig = if_else(pval < alpha, "sig", "nonsig")) #p<.05 --> rej null TRUE, do not rej FALSE

group3 <- group3 %>% 
  mutate(psig = if_else(pval < alpha, "sig", "nonsig")) #p<.05 --> rej null TRUE, do not rej FALSE

#bayes factors 
group2 <- group2 %>% mutate(bf_prop = if_else(exp(bf) > 3, "null", "no"))
group3 <- group3 %>% mutate(bf_prop = if_else(exp(bf) > 3, "null", "no"))

#loo & waic 
group2 <- group2 %>% mutate(
  loo_results = if_else(abs(loo_diff) > abs(2*loo_se),"yes", "no"),
  waic_results = if_else(abs(waic_diff) > abs(2*waic_se), "yes", "no")
) %>% 
  rename(samplesize = n)

group3 <- group3 %>% mutate(
  loo_results = if_else(abs(loo_diff) > abs(2*loo_se),"yes", "no"),
  waic_results = if_else(abs(waic_diff) > abs(2*waic_se), "yes", "no")
) %>% 
  rename(samplesize = n)
save(final_threegroups, file = "simulation_3groupFINAL.rda")
```
